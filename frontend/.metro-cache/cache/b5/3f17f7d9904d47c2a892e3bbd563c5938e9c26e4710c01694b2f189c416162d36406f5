{"dependencies":[{"name":"tslib","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":16,"index":93},"end":{"line":3,"column":32,"index":109}}],"key":"vm88vOsSPZItrLOmMEyUuGkd1y4=","exportNames":["*"],"imports":1}},{"name":"../lib/errors","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":17,"index":128},"end":{"line":4,"column":41,"index":152}}],"key":"+GSAvg/CWfG2ifOQrWLkai/D9hY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  const tslib_1 = require(_dependencyMap[0], \"tslib\");\n  const errors_1 = require(_dependencyMap[1], \"../lib/errors\");\n  class StreamDownloadBuilder {\n    constructor(downloadFn, shouldThrowOnError) {\n      this.downloadFn = downloadFn;\n      this.shouldThrowOnError = shouldThrowOnError;\n    }\n    then(onfulfilled, onrejected) {\n      return this.execute().then(onfulfilled, onrejected);\n    }\n    execute() {\n      return tslib_1.__awaiter(this, void 0, void 0, function* () {\n        try {\n          const result = yield this.downloadFn();\n          return {\n            data: result.body,\n            error: null\n          };\n        } catch (error) {\n          if (this.shouldThrowOnError) {\n            throw error;\n          }\n          if ((0, errors_1.isStorageError)(error)) {\n            return {\n              data: null,\n              error\n            };\n          }\n          throw error;\n        }\n      });\n    }\n  }\n  exports.default = StreamDownloadBuilder;\n});","lineCount":41,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0],[7,8,3,6,"tslib_1"],[7,15,3,13],[7,18,3,16,"require"],[7,25,3,23],[7,26,3,23,"_dependencyMap"],[7,40,3,23],[7,52,3,31],[7,53,3,32],[8,2,4,0],[8,8,4,6,"errors_1"],[8,16,4,14],[8,19,4,17,"require"],[8,26,4,24],[8,27,4,24,"_dependencyMap"],[8,41,4,24],[8,61,4,40],[8,62,4,41],[9,2,5,0],[9,8,5,6,"StreamDownloadBuilder"],[9,29,5,27],[9,30,5,28],[10,4,6,4,"constructor"],[10,15,6,15,"constructor"],[10,16,6,16,"downloadFn"],[10,26,6,26],[10,28,6,28,"shouldThrowOnError"],[10,46,6,46],[10,48,6,48],[11,6,7,8],[11,10,7,12],[11,11,7,13,"downloadFn"],[11,21,7,23],[11,24,7,26,"downloadFn"],[11,34,7,36],[12,6,8,8],[12,10,8,12],[12,11,8,13,"shouldThrowOnError"],[12,29,8,31],[12,32,8,34,"shouldThrowOnError"],[12,50,8,52],[13,4,9,4],[14,4,10,4,"then"],[14,8,10,8,"then"],[14,9,10,9,"onfulfilled"],[14,20,10,20],[14,22,10,22,"onrejected"],[14,32,10,32],[14,34,10,34],[15,6,11,8],[15,13,11,15],[15,17,11,19],[15,18,11,20,"execute"],[15,25,11,27],[15,26,11,28],[15,27,11,29],[15,28,11,30,"then"],[15,32,11,34],[15,33,11,35,"onfulfilled"],[15,44,11,46],[15,46,11,48,"onrejected"],[15,56,11,58],[15,57,11,59],[16,4,12,4],[17,4,13,4,"execute"],[17,11,13,11,"execute"],[17,12,13,11],[17,14,13,14],[18,6,14,8],[18,13,14,15,"tslib_1"],[18,20,14,22],[18,21,14,23,"__awaiter"],[18,30,14,32],[18,31,14,33],[18,35,14,37],[18,37,14,39],[18,42,14,44],[18,43,14,45],[18,45,14,47],[18,50,14,52],[18,51,14,53],[18,53,14,55],[18,66,14,68],[19,8,15,12],[19,12,15,16],[20,10,16,16],[20,16,16,22,"result"],[20,22,16,28],[20,25,16,31],[20,31,16,37],[20,35,16,41],[20,36,16,42,"downloadFn"],[20,46,16,52],[20,47,16,53],[20,48,16,54],[21,10,17,16],[21,17,17,23],[22,12,18,20,"data"],[22,16,18,24],[22,18,18,26,"result"],[22,24,18,32],[22,25,18,33,"body"],[22,29,18,37],[23,12,19,20,"error"],[23,17,19,25],[23,19,19,27],[24,10,20,16],[24,11,20,17],[25,8,21,12],[25,9,21,13],[25,10,22,12],[25,17,22,19,"error"],[25,22,22,24],[25,24,22,26],[26,10,23,16],[26,14,23,20],[26,18,23,24],[26,19,23,25,"shouldThrowOnError"],[26,37,23,43],[26,39,23,45],[27,12,24,20],[27,18,24,26,"error"],[27,23,24,31],[28,10,25,16],[29,10,26,16],[29,14,26,20],[29,15,26,21],[29,16,26,22],[29,18,26,24,"errors_1"],[29,26,26,32],[29,27,26,33,"isStorageError"],[29,41,26,47],[29,43,26,49,"error"],[29,48,26,54],[29,49,26,55],[29,51,26,57],[30,12,27,20],[30,19,27,27],[31,14,27,29,"data"],[31,18,27,33],[31,20,27,35],[31,24,27,39],[32,14,27,41,"error"],[33,12,27,47],[33,13,27,48],[34,10,28,16],[35,10,29,16],[35,16,29,22,"error"],[35,21,29,27],[36,8,30,12],[37,6,31,8],[37,7,31,9],[37,8,31,10],[38,4,32,4],[39,2,33,0],[40,2,34,0,"exports"],[40,9,34,7],[40,10,34,8,"default"],[40,17,34,15],[40,20,34,18,"StreamDownloadBuilder"],[40,41,34,39],[41,0,34,40],[41,3]],"functionMap":{"names":["<global>","StreamDownloadBuilder","constructor","then","execute","tslib_1.__awaiter$argument_3"],"mappings":"AAA;ACI;ICC;KDG;IEC;KFE;IGC;uDCC;SDiB;KHC;CDC"},"hasCjsExports":true},"type":"js/module"}]}