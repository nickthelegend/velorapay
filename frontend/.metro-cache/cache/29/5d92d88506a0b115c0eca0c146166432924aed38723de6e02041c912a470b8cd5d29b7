{"dependencies":[{"name":"tslib","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":8},"end":{"line":2,"column":34,"index":42}}],"key":"8R25577gwLd3n1hFG9VYnRLV9eE=","exportNames":["*"],"imports":1}},{"name":"../lib/errors","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":43},"end":{"line":3,"column":47,"index":90}}],"key":"tudpaQjH3OjVUtpmjZhVLT9U2eg=","exportNames":["*"],"imports":1}},{"name":"./StreamDownloadBuilder","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":91},"end":{"line":4,"column":60,"index":151}}],"key":"8Ubul3M21knXuSFidv57RlVYJmI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _tslib = require(_dependencyMap[0], \"tslib\");\n  var _libErrors = require(_dependencyMap[1], \"../lib/errors\");\n  var _StreamDownloadBuilder = require(_dependencyMap[2], \"./StreamDownloadBuilder\");\n  var StreamDownloadBuilder = _interopDefault(_StreamDownloadBuilder);\n  var _a;\n  class BlobDownloadBuilder {\n    constructor(downloadFn, shouldThrowOnError) {\n      this.downloadFn = downloadFn;\n      this.shouldThrowOnError = shouldThrowOnError;\n      this[_a] = 'BlobDownloadBuilder';\n      this.promise = null;\n    }\n    asStream() {\n      return new StreamDownloadBuilder.default(this.downloadFn, this.shouldThrowOnError);\n    }\n    then(onfulfilled, onrejected) {\n      return this.getPromise().then(onfulfilled, onrejected);\n    }\n    catch(onrejected) {\n      return this.getPromise().catch(onrejected);\n    }\n    finally(onfinally) {\n      return this.getPromise().finally(onfinally);\n    }\n    getPromise() {\n      if (!this.promise) {\n        this.promise = this.execute();\n      }\n      return this.promise;\n    }\n    execute() {\n      return (0, _tslib.__awaiter)(this, void 0, void 0, function* () {\n        try {\n          const result = yield this.downloadFn();\n          return {\n            data: yield result.blob(),\n            error: null\n          };\n        } catch (error) {\n          if (this.shouldThrowOnError) {\n            throw error;\n          }\n          if ((0, _libErrors.isStorageError)(error)) {\n            return {\n              data: null,\n              error\n            };\n          }\n          throw error;\n        }\n      });\n    }\n  }\n  _a = Symbol.toStringTag;\n  var _default = BlobDownloadBuilder;\n});","lineCount":73,"map":[[12,2,52,0,"Object"],[12,8,52,0],[12,9,52,0,"defineProperty"],[12,23,52,0],[12,24,52,0,"exports"],[12,31,52,0],[13,4,52,0,"enumerable"],[13,14,52,0],[14,4,52,0,"get"],[14,7,52,0],[14,18,52,0,"get"],[14,19,52,0],[15,6,52,0],[15,13,52,0,"_default"],[15,21,52,0],[16,4,52,0],[17,2,52,0],[18,2,2,0],[18,6,2,0,"_tslib"],[18,12,2,0],[18,15,2,0,"require"],[18,22,2,0],[18,23,2,0,"_dependencyMap"],[18,37,2,0],[19,2,3,0],[19,6,3,0,"_libErrors"],[19,16,3,0],[19,19,3,0,"require"],[19,26,3,0],[19,27,3,0,"_dependencyMap"],[19,41,3,0],[20,2,4,0],[20,6,4,0,"_StreamDownloadBuilder"],[20,28,4,0],[20,31,4,0,"require"],[20,38,4,0],[20,39,4,0,"_dependencyMap"],[20,53,4,0],[21,2,4,0],[21,6,4,0,"StreamDownloadBuilder"],[21,27,4,0],[21,30,4,0,"_interopDefault"],[21,45,4,0],[21,46,4,0,"_StreamDownloadBuilder"],[21,68,4,0],[22,2,1,0],[22,6,1,4,"_a"],[22,8,1,6],[23,2,5,0],[23,8,5,6,"BlobDownloadBuilder"],[23,27,5,25],[23,28,5,26],[24,4,6,4,"constructor"],[24,15,6,15,"constructor"],[24,16,6,16,"downloadFn"],[24,26,6,26],[24,28,6,28,"shouldThrowOnError"],[24,46,6,46],[24,48,6,48],[25,6,7,8],[25,10,7,12],[25,11,7,13,"downloadFn"],[25,21,7,23],[25,24,7,26,"downloadFn"],[25,34,7,36],[26,6,8,8],[26,10,8,12],[26,11,8,13,"shouldThrowOnError"],[26,29,8,31],[26,32,8,34,"shouldThrowOnError"],[26,50,8,52],[27,6,9,8],[27,10,9,12],[27,11,9,13,"_a"],[27,13,9,15],[27,14,9,16],[27,17,9,19],[27,38,9,40],[28,6,10,8],[28,10,10,12],[28,11,10,13,"promise"],[28,18,10,20],[28,21,10,23],[28,25,10,27],[29,4,11,4],[30,4,12,4,"asStream"],[30,12,12,12,"asStream"],[30,13,12,12],[30,15,12,15],[31,6,13,8],[31,13,13,15],[31,17,13,19,"StreamDownloadBuilder"],[31,38,13,40],[31,39,13,40,"default"],[31,46,13,40],[31,47,13,41],[31,51,13,45],[31,52,13,46,"downloadFn"],[31,62,13,56],[31,64,13,58],[31,68,13,62],[31,69,13,63,"shouldThrowOnError"],[31,87,13,81],[31,88,13,82],[32,4,14,4],[33,4,15,4,"then"],[33,8,15,8,"then"],[33,9,15,9,"onfulfilled"],[33,20,15,20],[33,22,15,22,"onrejected"],[33,32,15,32],[33,34,15,34],[34,6,16,8],[34,13,16,15],[34,17,16,19],[34,18,16,20,"getPromise"],[34,28,16,30],[34,29,16,31],[34,30,16,32],[34,31,16,33,"then"],[34,35,16,37],[34,36,16,38,"onfulfilled"],[34,47,16,49],[34,49,16,51,"onrejected"],[34,59,16,61],[34,60,16,62],[35,4,17,4],[36,4,18,4,"catch"],[36,9,18,9,"catch"],[36,10,18,10,"onrejected"],[36,20,18,20],[36,22,18,22],[37,6,19,8],[37,13,19,15],[37,17,19,19],[37,18,19,20,"getPromise"],[37,28,19,30],[37,29,19,31],[37,30,19,32],[37,31,19,33,"catch"],[37,36,19,38],[37,37,19,39,"onrejected"],[37,47,19,49],[37,48,19,50],[38,4,20,4],[39,4,21,4,"finally"],[39,11,21,11,"finally"],[39,12,21,12,"onfinally"],[39,21,21,21],[39,23,21,23],[40,6,22,8],[40,13,22,15],[40,17,22,19],[40,18,22,20,"getPromise"],[40,28,22,30],[40,29,22,31],[40,30,22,32],[40,31,22,33,"finally"],[40,38,22,40],[40,39,22,41,"onfinally"],[40,48,22,50],[40,49,22,51],[41,4,23,4],[42,4,24,4,"getPromise"],[42,14,24,14,"getPromise"],[42,15,24,14],[42,17,24,17],[43,6,25,8],[43,10,25,12],[43,11,25,13],[43,15,25,17],[43,16,25,18,"promise"],[43,23,25,25],[43,25,25,27],[44,8,26,12],[44,12,26,16],[44,13,26,17,"promise"],[44,20,26,24],[44,23,26,27],[44,27,26,31],[44,28,26,32,"execute"],[44,35,26,39],[44,36,26,40],[44,37,26,41],[45,6,27,8],[46,6,28,8],[46,13,28,15],[46,17,28,19],[46,18,28,20,"promise"],[46,25,28,27],[47,4,29,4],[48,4,30,4,"execute"],[48,11,30,11,"execute"],[48,12,30,11],[48,14,30,14],[49,6,31,8],[49,13,31,15],[49,17,31,15,"__awaiter"],[49,23,31,24],[49,24,31,24,"__awaiter"],[49,33,31,24],[49,35,31,25],[49,39,31,29],[49,41,31,31],[49,46,31,36],[49,47,31,37],[49,49,31,39],[49,54,31,44],[49,55,31,45],[49,57,31,47],[49,70,31,60],[50,8,32,12],[50,12,32,16],[51,10,33,16],[51,16,33,22,"result"],[51,22,33,28],[51,25,33,31],[51,31,33,37],[51,35,33,41],[51,36,33,42,"downloadFn"],[51,46,33,52],[51,47,33,53],[51,48,33,54],[52,10,34,16],[52,17,34,23],[53,12,35,20,"data"],[53,16,35,24],[53,18,35,26],[53,24,35,32,"result"],[53,30,35,38],[53,31,35,39,"blob"],[53,35,35,43],[53,36,35,44],[53,37,35,45],[54,12,36,20,"error"],[54,17,36,25],[54,19,36,27],[55,10,37,16],[55,11,37,17],[56,8,38,12],[56,9,38,13],[56,10,39,12],[56,17,39,19,"error"],[56,22,39,24],[56,24,39,26],[57,10,40,16],[57,14,40,20],[57,18,40,24],[57,19,40,25,"shouldThrowOnError"],[57,37,40,43],[57,39,40,45],[58,12,41,20],[58,18,41,26,"error"],[58,23,41,31],[59,10,42,16],[60,10,43,16],[60,14,43,20],[60,18,43,20,"isStorageError"],[60,28,43,34],[60,29,43,34,"isStorageError"],[60,43,43,34],[60,45,43,35,"error"],[60,50,43,40],[60,51,43,41],[60,53,43,43],[61,12,44,20],[61,19,44,27],[62,14,44,29,"data"],[62,18,44,33],[62,20,44,35],[62,24,44,39],[63,14,44,41,"error"],[64,12,44,47],[64,13,44,48],[65,10,45,16],[66,10,46,16],[66,16,46,22,"error"],[66,21,46,27],[67,8,47,12],[68,6,48,8],[68,7,48,9],[68,8,48,10],[69,4,49,4],[70,2,50,0],[71,2,51,0,"_a"],[71,4,51,2],[71,7,51,5,"Symbol"],[71,13,51,11],[71,14,51,12,"toStringTag"],[71,25,51,23],[72,2,52,0],[72,6,52,0,"_default"],[72,14,52,0],[72,17,52,15,"BlobDownloadBuilder"],[72,36,52,34],[73,0,52,35],[73,3]],"functionMap":{"names":["<global>","BlobDownloadBuilder","constructor","asStream","then","_catch","_finally","getPromise","execute","__awaiter$argument_3"],"mappings":"AAA;ACI;ICC;KDK;IEC;KFE;IGC;KHE;IIC;KJE;IKC;KLE;IMC;KNK;IOC;+CCC;SDiB;KPC;CDC"},"hasCjsExports":false},"type":"js/module"}]}