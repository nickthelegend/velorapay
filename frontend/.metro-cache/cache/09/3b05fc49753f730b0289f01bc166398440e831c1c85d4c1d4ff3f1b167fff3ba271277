{"dependencies":[{"name":"tslib","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":16,"index":101},"end":{"line":4,"column":32,"index":117}}],"key":"vm88vOsSPZItrLOmMEyUuGkd1y4=","exportNames":["*"],"imports":1}},{"name":"../lib/errors","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":17,"index":136},"end":{"line":5,"column":41,"index":160}}],"key":"+GSAvg/CWfG2ifOQrWLkai/D9hY=","exportNames":["*"],"imports":1}},{"name":"./StreamDownloadBuilder","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":56,"index":218},"end":{"line":6,"column":90,"index":252}}],"key":"J2qh5zRhKrS/71C3urjbsL+bmGQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _a;\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  const tslib_1 = require(_dependencyMap[0], \"tslib\");\n  const errors_1 = require(_dependencyMap[1], \"../lib/errors\");\n  const StreamDownloadBuilder_1 = tslib_1.__importDefault(require(_dependencyMap[2], \"./StreamDownloadBuilder\"));\n  class BlobDownloadBuilder {\n    constructor(downloadFn, shouldThrowOnError) {\n      this.downloadFn = downloadFn;\n      this.shouldThrowOnError = shouldThrowOnError;\n      this[_a] = 'BlobDownloadBuilder';\n      this.promise = null;\n    }\n    asStream() {\n      return new StreamDownloadBuilder_1.default(this.downloadFn, this.shouldThrowOnError);\n    }\n    then(onfulfilled, onrejected) {\n      return this.getPromise().then(onfulfilled, onrejected);\n    }\n    catch(onrejected) {\n      return this.getPromise().catch(onrejected);\n    }\n    finally(onfinally) {\n      return this.getPromise().finally(onfinally);\n    }\n    getPromise() {\n      if (!this.promise) {\n        this.promise = this.execute();\n      }\n      return this.promise;\n    }\n    execute() {\n      return tslib_1.__awaiter(this, void 0, void 0, function* () {\n        try {\n          const result = yield this.downloadFn();\n          return {\n            data: yield result.blob(),\n            error: null\n          };\n        } catch (error) {\n          if (this.shouldThrowOnError) {\n            throw error;\n          }\n          if ((0, errors_1.isStorageError)(error)) {\n            return {\n              data: null,\n              error\n            };\n          }\n          throw error;\n        }\n      });\n    }\n  }\n  _a = Symbol.toStringTag;\n  exports.default = BlobDownloadBuilder;\n});","lineCount":61,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0],[4,6,2,4,"_a"],[4,8,2,6],[5,2,3,0,"Object"],[5,8,3,6],[5,9,3,7,"defineProperty"],[5,23,3,21],[5,24,3,22,"exports"],[5,31,3,29],[5,33,3,31],[5,45,3,43],[5,47,3,45],[6,4,3,47,"value"],[6,9,3,52],[6,11,3,54],[7,2,3,59],[7,3,3,60],[7,4,3,61],[8,2,4,0],[8,8,4,6,"tslib_1"],[8,15,4,13],[8,18,4,16,"require"],[8,25,4,23],[8,26,4,23,"_dependencyMap"],[8,40,4,23],[8,52,4,31],[8,53,4,32],[9,2,5,0],[9,8,5,6,"errors_1"],[9,16,5,14],[9,19,5,17,"require"],[9,26,5,24],[9,27,5,24,"_dependencyMap"],[9,41,5,24],[9,61,5,40],[9,62,5,41],[10,2,6,0],[10,8,6,6,"StreamDownloadBuilder_1"],[10,31,6,29],[10,34,6,32,"tslib_1"],[10,41,6,39],[10,42,6,40,"__importDefault"],[10,57,6,55],[10,58,6,56,"require"],[10,65,6,63],[10,66,6,63,"_dependencyMap"],[10,80,6,63],[10,110,6,89],[10,111,6,90],[10,112,6,91],[11,2,7,0],[11,8,7,6,"BlobDownloadBuilder"],[11,27,7,25],[11,28,7,26],[12,4,8,4,"constructor"],[12,15,8,15,"constructor"],[12,16,8,16,"downloadFn"],[12,26,8,26],[12,28,8,28,"shouldThrowOnError"],[12,46,8,46],[12,48,8,48],[13,6,9,8],[13,10,9,12],[13,11,9,13,"downloadFn"],[13,21,9,23],[13,24,9,26,"downloadFn"],[13,34,9,36],[14,6,10,8],[14,10,10,12],[14,11,10,13,"shouldThrowOnError"],[14,29,10,31],[14,32,10,34,"shouldThrowOnError"],[14,50,10,52],[15,6,11,8],[15,10,11,12],[15,11,11,13,"_a"],[15,13,11,15],[15,14,11,16],[15,17,11,19],[15,38,11,40],[16,6,12,8],[16,10,12,12],[16,11,12,13,"promise"],[16,18,12,20],[16,21,12,23],[16,25,12,27],[17,4,13,4],[18,4,14,4,"asStream"],[18,12,14,12,"asStream"],[18,13,14,12],[18,15,14,15],[19,6,15,8],[19,13,15,15],[19,17,15,19,"StreamDownloadBuilder_1"],[19,40,15,42],[19,41,15,43,"default"],[19,48,15,50],[19,49,15,51],[19,53,15,55],[19,54,15,56,"downloadFn"],[19,64,15,66],[19,66,15,68],[19,70,15,72],[19,71,15,73,"shouldThrowOnError"],[19,89,15,91],[19,90,15,92],[20,4,16,4],[21,4,17,4,"then"],[21,8,17,8,"then"],[21,9,17,9,"onfulfilled"],[21,20,17,20],[21,22,17,22,"onrejected"],[21,32,17,32],[21,34,17,34],[22,6,18,8],[22,13,18,15],[22,17,18,19],[22,18,18,20,"getPromise"],[22,28,18,30],[22,29,18,31],[22,30,18,32],[22,31,18,33,"then"],[22,35,18,37],[22,36,18,38,"onfulfilled"],[22,47,18,49],[22,49,18,51,"onrejected"],[22,59,18,61],[22,60,18,62],[23,4,19,4],[24,4,20,4,"catch"],[24,9,20,9,"catch"],[24,10,20,10,"onrejected"],[24,20,20,20],[24,22,20,22],[25,6,21,8],[25,13,21,15],[25,17,21,19],[25,18,21,20,"getPromise"],[25,28,21,30],[25,29,21,31],[25,30,21,32],[25,31,21,33,"catch"],[25,36,21,38],[25,37,21,39,"onrejected"],[25,47,21,49],[25,48,21,50],[26,4,22,4],[27,4,23,4,"finally"],[27,11,23,11,"finally"],[27,12,23,12,"onfinally"],[27,21,23,21],[27,23,23,23],[28,6,24,8],[28,13,24,15],[28,17,24,19],[28,18,24,20,"getPromise"],[28,28,24,30],[28,29,24,31],[28,30,24,32],[28,31,24,33,"finally"],[28,38,24,40],[28,39,24,41,"onfinally"],[28,48,24,50],[28,49,24,51],[29,4,25,4],[30,4,26,4,"getPromise"],[30,14,26,14,"getPromise"],[30,15,26,14],[30,17,26,17],[31,6,27,8],[31,10,27,12],[31,11,27,13],[31,15,27,17],[31,16,27,18,"promise"],[31,23,27,25],[31,25,27,27],[32,8,28,12],[32,12,28,16],[32,13,28,17,"promise"],[32,20,28,24],[32,23,28,27],[32,27,28,31],[32,28,28,32,"execute"],[32,35,28,39],[32,36,28,40],[32,37,28,41],[33,6,29,8],[34,6,30,8],[34,13,30,15],[34,17,30,19],[34,18,30,20,"promise"],[34,25,30,27],[35,4,31,4],[36,4,32,4,"execute"],[36,11,32,11,"execute"],[36,12,32,11],[36,14,32,14],[37,6,33,8],[37,13,33,15,"tslib_1"],[37,20,33,22],[37,21,33,23,"__awaiter"],[37,30,33,32],[37,31,33,33],[37,35,33,37],[37,37,33,39],[37,42,33,44],[37,43,33,45],[37,45,33,47],[37,50,33,52],[37,51,33,53],[37,53,33,55],[37,66,33,68],[38,8,34,12],[38,12,34,16],[39,10,35,16],[39,16,35,22,"result"],[39,22,35,28],[39,25,35,31],[39,31,35,37],[39,35,35,41],[39,36,35,42,"downloadFn"],[39,46,35,52],[39,47,35,53],[39,48,35,54],[40,10,36,16],[40,17,36,23],[41,12,37,20,"data"],[41,16,37,24],[41,18,37,26],[41,24,37,32,"result"],[41,30,37,38],[41,31,37,39,"blob"],[41,35,37,43],[41,36,37,44],[41,37,37,45],[42,12,38,20,"error"],[42,17,38,25],[42,19,38,27],[43,10,39,16],[43,11,39,17],[44,8,40,12],[44,9,40,13],[44,10,41,12],[44,17,41,19,"error"],[44,22,41,24],[44,24,41,26],[45,10,42,16],[45,14,42,20],[45,18,42,24],[45,19,42,25,"shouldThrowOnError"],[45,37,42,43],[45,39,42,45],[46,12,43,20],[46,18,43,26,"error"],[46,23,43,31],[47,10,44,16],[48,10,45,16],[48,14,45,20],[48,15,45,21],[48,16,45,22],[48,18,45,24,"errors_1"],[48,26,45,32],[48,27,45,33,"isStorageError"],[48,41,45,47],[48,43,45,49,"error"],[48,48,45,54],[48,49,45,55],[48,51,45,57],[49,12,46,20],[49,19,46,27],[50,14,46,29,"data"],[50,18,46,33],[50,20,46,35],[50,24,46,39],[51,14,46,41,"error"],[52,12,46,47],[52,13,46,48],[53,10,47,16],[54,10,48,16],[54,16,48,22,"error"],[54,21,48,27],[55,8,49,12],[56,6,50,8],[56,7,50,9],[56,8,50,10],[57,4,51,4],[58,2,52,0],[59,2,53,0,"_a"],[59,4,53,2],[59,7,53,5,"Symbol"],[59,13,53,11],[59,14,53,12,"toStringTag"],[59,25,53,23],[60,2,54,0,"exports"],[60,9,54,7],[60,10,54,8,"default"],[60,17,54,15],[60,20,54,18,"BlobDownloadBuilder"],[60,39,54,37],[61,0,54,38],[61,3]],"functionMap":{"names":["<global>","BlobDownloadBuilder","constructor","asStream","then","_catch","_finally","getPromise","execute","tslib_1.__awaiter$argument_3"],"mappings":"AAA;ACM;ICC;KDK;IEC;KFE;IGC;KHE;IIC;KJE;IKC;KLE;IMC;KNK;IOC;uDCC;SDiB;KPC;CDC"},"hasCjsExports":true},"type":"js/module"}]}