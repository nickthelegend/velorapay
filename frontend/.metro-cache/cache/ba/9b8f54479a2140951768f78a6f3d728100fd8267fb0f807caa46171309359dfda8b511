{"dependencies":[{"name":"tslib","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":34,"index":34}}],"key":"8R25577gwLd3n1hFG9VYnRLV9eE=","exportNames":["*"],"imports":1}},{"name":"../lib/errors","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":35},"end":{"line":2,"column":47,"index":82}}],"key":"tudpaQjH3OjVUtpmjZhVLT9U2eg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return StreamDownloadBuilder;\n    }\n  });\n  var _tslib = require(_dependencyMap[0], \"tslib\");\n  var _libErrors = require(_dependencyMap[1], \"../lib/errors\");\n  class StreamDownloadBuilder {\n    constructor(downloadFn, shouldThrowOnError) {\n      this.downloadFn = downloadFn;\n      this.shouldThrowOnError = shouldThrowOnError;\n    }\n    then(onfulfilled, onrejected) {\n      return this.execute().then(onfulfilled, onrejected);\n    }\n    execute() {\n      return (0, _tslib.__awaiter)(this, void 0, void 0, function* () {\n        try {\n          const result = yield this.downloadFn();\n          return {\n            data: result.body,\n            error: null\n          };\n        } catch (error) {\n          if (this.shouldThrowOnError) {\n            throw error;\n          }\n          if ((0, _libErrors.isStorageError)(error)) {\n            return {\n              data: null,\n              error\n            };\n          }\n          throw error;\n        }\n      });\n    }\n  }\n});","lineCount":46,"map":[[7,2,3,15,"Object"],[7,8,3,15],[7,9,3,15,"defineProperty"],[7,23,3,15],[7,24,3,15,"exports"],[7,31,3,15],[8,4,3,15,"enumerable"],[8,14,3,15],[9,4,3,15,"get"],[9,7,3,15],[9,18,3,15,"get"],[9,19,3,15],[10,6,3,15],[10,13,3,15,"StreamDownloadBuilder"],[10,34,3,15],[11,4,3,15],[12,2,3,15],[13,2,1,0],[13,6,1,0,"_tslib"],[13,12,1,0],[13,15,1,0,"require"],[13,22,1,0],[13,23,1,0,"_dependencyMap"],[13,37,1,0],[14,2,2,0],[14,6,2,0,"_libErrors"],[14,16,2,0],[14,19,2,0,"require"],[14,26,2,0],[14,27,2,0,"_dependencyMap"],[14,41,2,0],[15,2,3,15],[15,8,3,21,"StreamDownloadBuilder"],[15,29,3,42],[15,30,3,43],[16,4,4,4,"constructor"],[16,15,4,15,"constructor"],[16,16,4,16,"downloadFn"],[16,26,4,26],[16,28,4,28,"shouldThrowOnError"],[16,46,4,46],[16,48,4,48],[17,6,5,8],[17,10,5,12],[17,11,5,13,"downloadFn"],[17,21,5,23],[17,24,5,26,"downloadFn"],[17,34,5,36],[18,6,6,8],[18,10,6,12],[18,11,6,13,"shouldThrowOnError"],[18,29,6,31],[18,32,6,34,"shouldThrowOnError"],[18,50,6,52],[19,4,7,4],[20,4,8,4,"then"],[20,8,8,8,"then"],[20,9,8,9,"onfulfilled"],[20,20,8,20],[20,22,8,22,"onrejected"],[20,32,8,32],[20,34,8,34],[21,6,9,8],[21,13,9,15],[21,17,9,19],[21,18,9,20,"execute"],[21,25,9,27],[21,26,9,28],[21,27,9,29],[21,28,9,30,"then"],[21,32,9,34],[21,33,9,35,"onfulfilled"],[21,44,9,46],[21,46,9,48,"onrejected"],[21,56,9,58],[21,57,9,59],[22,4,10,4],[23,4,11,4,"execute"],[23,11,11,11,"execute"],[23,12,11,11],[23,14,11,14],[24,6,12,8],[24,13,12,15],[24,17,12,15,"__awaiter"],[24,23,12,24],[24,24,12,24,"__awaiter"],[24,33,12,24],[24,35,12,25],[24,39,12,29],[24,41,12,31],[24,46,12,36],[24,47,12,37],[24,49,12,39],[24,54,12,44],[24,55,12,45],[24,57,12,47],[24,70,12,60],[25,8,13,12],[25,12,13,16],[26,10,14,16],[26,16,14,22,"result"],[26,22,14,28],[26,25,14,31],[26,31,14,37],[26,35,14,41],[26,36,14,42,"downloadFn"],[26,46,14,52],[26,47,14,53],[26,48,14,54],[27,10,15,16],[27,17,15,23],[28,12,16,20,"data"],[28,16,16,24],[28,18,16,26,"result"],[28,24,16,32],[28,25,16,33,"body"],[28,29,16,37],[29,12,17,20,"error"],[29,17,17,25],[29,19,17,27],[30,10,18,16],[30,11,18,17],[31,8,19,12],[31,9,19,13],[31,10,20,12],[31,17,20,19,"error"],[31,22,20,24],[31,24,20,26],[32,10,21,16],[32,14,21,20],[32,18,21,24],[32,19,21,25,"shouldThrowOnError"],[32,37,21,43],[32,39,21,45],[33,12,22,20],[33,18,22,26,"error"],[33,23,22,31],[34,10,23,16],[35,10,24,16],[35,14,24,20],[35,18,24,20,"isStorageError"],[35,28,24,34],[35,29,24,34,"isStorageError"],[35,43,24,34],[35,45,24,35,"error"],[35,50,24,40],[35,51,24,41],[35,53,24,43],[36,12,25,20],[36,19,25,27],[37,14,25,29,"data"],[37,18,25,33],[37,20,25,35],[37,24,25,39],[38,14,25,41,"error"],[39,12,25,47],[39,13,25,48],[40,10,26,16],[41,10,27,16],[41,16,27,22,"error"],[41,21,27,27],[42,8,28,12],[43,6,29,8],[43,7,29,9],[43,8,29,10],[44,4,30,4],[45,2,31,0],[46,0,31,1],[46,3]],"functionMap":{"names":["<global>","StreamDownloadBuilder","constructor","then","execute","__awaiter$argument_3"],"mappings":"AAA;eCE;ICC;KDG;IEC;KFE;IGC;+CCC;SDiB;KHC;CDC"},"hasCjsExports":false},"type":"js/module"}]}